"use strict";(self.webpackChunkodra_website=self.webpackChunkodra_website||[]).push([[14062],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>c});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=r.createContext({}),d=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=d(e.components);return r.createElement(i.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(t),c=a,f=m["".concat(i,".").concat(c)]||m[c]||u[c]||o;return t?r.createElement(f,s(s({ref:n},p),{},{components:t})):r.createElement(f,s({ref:n},p))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=m;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var d=2;d<o;d++)s[d]=t[d];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},40808:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var r=t(87462),a=(t(67294),t(3905));const o={sidebar_position:2},s="Using odra-modules",l={unversionedId:"examples/using-odra-modules",id:"version-0.2.0/examples/using-odra-modules",title:"Using odra-modules",description:"Besides the Odra framework, you can attach to your project odra-module - a set of plug-and-play modules.",source:"@site/versioned_docs/version-0.2.0/examples/using-odra-modules.md",sourceDirName:"examples",slug:"/examples/using-odra-modules",permalink:"/docs/0.2.0/examples/using-odra-modules",draft:!1,tags:[],version:"0.2.0",lastUpdatedAt:1687764750,formattedLastUpdatedAt:"Jun 26, 2023",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"odra-examples",permalink:"/docs/0.2.0/examples/odra-examples"},next:{title:"Tutorials",permalink:"/docs/0.2.0/category/tutorials"}},i={},d=[],p={toc:d};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"using-odra-modules"},"Using odra-modules"),(0,a.kt)("p",null,"Besides the Odra framework, you can attach to your project ",(0,a.kt)("inlineCode",{parentName:"p"},"odra-module")," - a set of plug-and-play modules."),(0,a.kt)("p",null,"If you followed the ",(0,a.kt)("a",{parentName:"p",href:"/docs/0.2.0/getting-started/installation"},"Installation guide")," your Cargo.toml should look like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-toml",metastring:"title=Cargo.toml",title:"Cargo.toml"},'[package]\nname = "my_project"\nversion = "0.1.0"\nedition = "2021"\n\n[dependencies]\nodra = { version = "0.2.0", default-features = false }\n\n[features]\ndefault = ["mock-vm"]\nmock-vm = ["odra/mock-vm"]\ncasper = ["odra/casper"]\n')),(0,a.kt)("p",null,"To use ",(0,a.kt)("inlineCode",{parentName:"p"},"odra-modules"),", edit your ",(0,a.kt)("inlineCode",{parentName:"p"},"dependency")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"features")," sections."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-toml",metastring:"title=Cargo.toml",title:"Cargo.toml"},'[dependencies]\nodra = { path = "../core", default-features = false }\nodra-modules = { path = "../modules", default-features = false }\n\n[features]\ndefault = ["mock-vm"]\nmock-vm = ["odra/mock-vm", "odra-modules/mock-vm"]\ncasper = ["odra/casper", "odra-modules/casper"]\n')),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"odra-modules")," defines the same features as the core framework. It's essential to add the dependency without default features. And if you define a ",(0,a.kt)("inlineCode",{parentName:"p"},"casper")," feature in your project, add ",(0,a.kt)("inlineCode",{parentName:"p"},"odra-modules/casper"),"specifically (it applies to each backend).")),(0,a.kt)("p",null,"Now, the only thing left is to add a module to your contract."),(0,a.kt)("p",null,"Let's write an example of ",(0,a.kt)("inlineCode",{parentName:"p"},"MyToken")," based on ",(0,a.kt)("inlineCode",{parentName:"p"},"Erc20")," module."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'use odra::types::{Address, U256};\nuse odra_modules::erc20::Erc20;\n\n#[odra::module]\npub struct MyToken {\n    erc20: Erc20\n}\n\n#[odra::module]\nimpl OwnedToken {\n    #[odra(init)]\n    pub fn init(&mut self, initial_supply: U256) {\n        let name = String::from("MyToken");\n        let symbol = String::from("MT");\n        let decimals = 9u8;\n        self.erc20.init(name, symbol, decimals, initial_supply);\n    }\n\n    pub fn name(&self) -> String {\n        self.erc20.name()\n    }\n\n    pub fn symbol(&self) -> String {\n        self.erc20.symbol()\n    }\n\n    pub fn decimals(&self) -> u8 {\n        self.erc20.decimals()\n    }\n\n    pub fn total_supply(&self) -> U256 {\n        self.erc20.total_supply()\n    }\n\n    pub fn balance_of(&self, address: Address) -> U256 {\n        self.erc20.balance_of(address)\n    }\n\n    pub fn allowance(&self, owner: Address, spender: Address) -> U256 {\n        self.erc20.allowance(owner, spender)\n    }\n\n    pub fn transfer(&mut self, recipient: Address, amount: U256) {\n        self.erc20.transfer(recipient, amount);\n    }\n\n    pub fn transfer_from(&mut self, owner: Address, recipient: Address, amount: U256) {\n        self.erc20.transfer_from(owner, recipient, amount);\n    }\n\n    pub fn approve(&mut self, spender: Address, amount: U256) {\n        self.erc20.approve(spender, amount);\n    }\n}\n')),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"All available modules are placed in the main Odra repository.")))}u.isMDXComponent=!0}}]);